<!DOCTYPE html>
<html lang="en">

<head>
	<meta name="description" content="Mariage Lucie Benoit" />
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta charset="utf-8">
	<title>Lucie & Beno√Æt</title>
	<meta name="author" content="QP">
	<link rel="stylesheet" id="styleSheet" href="css/style.css">
	<script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
	<script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
	<link rel="stylesheet" href="css/font1.css">
	<script src="data.js"></script>
</head>

<body onload="loaded();">
  
<div class="container" >
	<div id="loaderScreen">
		<ion-icon name="heart-outline"></ion-icon>
		<div id="loadPoints"></div>
	</div>
	<div id="intro">
		Blab lbz zefljflz. zfkflzkfej.
		zefjzmf
		efzkfjzmkegjmzlj
		zegzkjgkjm
	</div>
	<div id="main">
		<div id="textZone">
			Cliquer pour changer de style.
		</div>
		<div id="photosZone">
			<div id="photoFrame">
				<img id="topPhoto" src="data\images\testLucieBenoit_style66_3.jpg"/>
				<img id="botPhoto" src="data\images\testLucieBenoit_style07_4.jpg"/>
			</div>
		</div>
		<div id="audioZone">
			<audio controls controlslist="nodownload noplaybackrate">
			   <source src="data/mashup_ff_dion.mp3">
			</audio>
		</div>
	</div>
	
</div>

<script>

const loaderScreen = document.getElementById("loaderScreen");
const intro = document.getElementById("intro");
const main = document.getElementById("main");
const topPhoto = document.getElementById("topPhoto");
const botPhoto = document.getElementById("botPhoto");
var images = new Array();
var indexTop = -1;
var indexBot = -1;


function loaded(){
	preloadPhotos();
}

function goMain(){
	intro.classList.add("fadeOut");
	main.addEventListener("click", click);
}

function click(){
	if(topPhoto.classList.contains("getBot")){
		indexTop = getRandomIndex();
		topPhoto.src = images[indexTop].src;
		topPhoto.classList.remove("getBot");
		botPhoto.classList.remove("getBot");
	}	
	else{
		indexBot = getRandomIndex();
		botPhoto.src = images[indexBot].src;
		topPhoto.classList.add("getBot");
		botPhoto.classList.add("getBot");
	}
	
}

function preloadPhotos(){
	for (var i = 0; i < jsonData.images.length; i++) {
		images[i] = new Image();
		images[i].src = "data/images/" + jsonData.images[i];
		console.log(jsonData.images[i]);
	}
	indexTop = getRandomIndex();
	topPhoto.src = images[indexTop].src;
	indexBot = getRandomIndex();
	botPhoto.src = images[indexBot].src;
	
	intro.addEventListener("click", goMain);
	loaderScreen.classList.add("fadeOut");
}

function getRandomIndex(){
	var index = 0;
	do{
		index = Math.floor(Math.random() * images.length);
	} while (index == indexTop || index == indexBot)
	return index
}


function preload() {
	for (var i = 0; i < preload.arguments.length; i++) {
		images[i] = new Image()
		images[i].src = preload.arguments[i]
	}
	
}

</script>
</body>
</html>
